{"ast":null,"code":"/*! @azure/msal-browser v3.0.2 2023-08-18 */\n'use strict';\n\nimport { AsyncMemoryStorage } from './AsyncMemoryStorage.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nconst CryptoKeyStoreNames = {\n  asymmetricKeys: \"asymmetricKeys\",\n  symmetricKeys: \"symmetricKeys\"\n};\n/**\r\n * MSAL CryptoKeyStore DB Version 2\r\n */\nclass CryptoKeyStore {\n  constructor(logger) {\n    this.logger = logger;\n    this.asymmetricKeys = new AsyncMemoryStorage(this.logger, CryptoKeyStoreNames.asymmetricKeys);\n    this.symmetricKeys = new AsyncMemoryStorage(this.logger, CryptoKeyStoreNames.symmetricKeys);\n  }\n  async clear() {\n    // Delete in-memory keystores\n    this.asymmetricKeys.clearInMemory();\n    this.symmetricKeys.clearInMemory();\n    /**\r\n     * There is only one database, so calling clearPersistent on asymmetric keystore takes care of\r\n     * every persistent keystore\r\n     */\n    try {\n      await this.asymmetricKeys.clearPersistent();\n      return true;\n    } catch (e) {\n      if (e instanceof Error) {\n        this.logger.error(`Clearing keystore failed with error: ${e.message}`);\n      } else {\n        this.logger.error(\"Clearing keystore failed with unknown error\");\n      }\n      return false;\n    }\n  }\n}\nexport { CryptoKeyStore, CryptoKeyStoreNames };","map":{"version":3,"names":["CryptoKeyStoreNames","asymmetricKeys","symmetricKeys","CryptoKeyStore","constructor","logger","AsyncMemoryStorage","clear","clearInMemory","clearPersistent","e","Error","error","message"],"sources":["../../src/cache/CryptoKeyStore.ts"],"sourcesContent":[null],"mappings":";;;;;AAAA;;;AAGG;AAMU,MAAAA,mBAAmB,GAAG;EAC/BC,cAAc,EAAE,gBAAgB;EAChCC,aAAa,EAAE;;AAKnB;;AAEG;MACUC,cAAc;EAKvBC,YAAYC,MAAc;IACtB,IAAI,CAACA,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACJ,cAAc,GAAG,IAAIK,kBAAkB,CACxC,IAAI,CAACD,MAAM,EACXL,mBAAmB,CAACC,cAAc,CACrC;IACD,IAAI,CAACC,aAAa,GAAG,IAAII,kBAAkB,CACvC,IAAI,CAACD,MAAM,EACXL,mBAAmB,CAACE,aAAa,CACpC;;EAGL,MAAMK,KAAKA,CAAA;;IAEP,IAAI,CAACN,cAAc,CAACO,aAAa,EAAE;IACnC,IAAI,CAACN,aAAa,CAACM,aAAa,EAAE;IAElC;;;AAGG;IACH,IAAI;MACA,MAAM,IAAI,CAACP,cAAc,CAACQ,eAAe,EAAE;MAC3C,OAAO,IAAI;IACd,EAAC,OAAOC,CAAC,EAAE;MACR,IAAIA,CAAC,YAAYC,KAAK,EAAE;QACpB,IAAI,CAACN,MAAM,CAACO,KAAK,CAC2B,wCAAAF,CAAC,CAACG,OAAS,GACtD;MACJ,OAAM;QACH,IAAI,CAACR,MAAM,CAACO,KAAK,CACb,6CAA6C,CAChD;MACJ;MAED,OAAO,KAAK;IACf;;AAER"},"metadata":{},"sourceType":"module","externalDependencies":[]}