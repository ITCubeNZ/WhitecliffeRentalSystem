{"ast":null,"code":"/*! @azure/msal-browser v3.0.2 2023-08-18 */\n'use strict';\n\nimport { Constants } from '@azure/msal-common';\nimport { BrowserStringUtils } from '../utils/BrowserStringUtils.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * Class which exposes APIs to decode base64 strings to plaintext. See here for implementation details:\r\n * https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#Solution_2_%E2%80%93_JavaScript's_UTF-16_%3E_UTF-8_%3E_base64\r\n */\nclass Base64Decode {\n  /**\r\n   * Returns a URL-safe plaintext decoded string from b64 encoded input.\r\n   * @param input\r\n   */\n  decode(input) {\n    let encodedString = input.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (encodedString.length % 4) {\n      case 0:\n        break;\n      case 2:\n        encodedString += \"==\";\n        break;\n      case 3:\n        encodedString += \"=\";\n        break;\n      default:\n        throw new Error(\"Invalid base64 string\");\n    }\n    const inputUtf8Arr = this.base64DecToArr(encodedString);\n    return BrowserStringUtils.utf8ArrToString(inputUtf8Arr);\n  }\n  /**\r\n   * Decodes base64 into Uint8Array\r\n   * @param base64String\r\n   * @param nBlockSize\r\n   */\n  base64DecToArr(base64String, nBlockSize) {\n    const sB64Enc = base64String.replace(/[^A-Za-z0-9\\+\\/]/g, Constants.EMPTY_STRING);\n    const nInLen = sB64Enc.length;\n    const nOutLen = nBlockSize ? Math.ceil((nInLen * 3 + 1 >>> 2) / nBlockSize) * nBlockSize : nInLen * 3 + 1 >>> 2;\n    const aBytes = new Uint8Array(nOutLen);\n    for (let nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n      nMod4 = nInIdx & 3;\n      nUint24 |= this.b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4;\n      if (nMod4 === 3 || nInLen - nInIdx === 1) {\n        for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n          aBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\n        }\n        nUint24 = 0;\n      }\n    }\n    return aBytes;\n  }\n  /**\r\n   * Base64 string to array decoding helper\r\n   * @param charNum\r\n   */\n  b64ToUint6(charNum) {\n    return charNum > 64 && charNum < 91 ? charNum - 65 : charNum > 96 && charNum < 123 ? charNum - 71 : charNum > 47 && charNum < 58 ? charNum + 4 : charNum === 43 ? 62 : charNum === 47 ? 63 : 0;\n  }\n}\nexport { Base64Decode };","map":{"version":3,"names":["Base64Decode","decode","input","encodedString","replace","length","Error","inputUtf8Arr","base64DecToArr","BrowserStringUtils","utf8ArrToString","base64String","nBlockSize","sB64Enc","Constants","EMPTY_STRING","nInLen","nOutLen","Math","ceil","aBytes","Uint8Array","nMod3","nMod4","nUint24","nOutIdx","nInIdx","b64ToUint6","charCodeAt","charNum"],"sources":["../../src/encode/Base64Decode.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA;;;AAGG;AAKH;;;AAGG;MACUA,YAAY;EACrB;;;AAGG;EACHC,MAAMA,CAACC,KAAa;IAChB,IAAIC,aAAa,GAAGD,KAAK,CAACE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IAC/D,QAAQD,aAAa,CAACE,MAAM,GAAG,CAAC;MAC5B,KAAK,CAAC;QACF;MACJ,KAAK,CAAC;QACFF,aAAa,IAAI,IAAI;QACrB;MACJ,KAAK,CAAC;QACFA,aAAa,IAAI,GAAG;QACpB;MACJ;QACI,MAAM,IAAIG,KAAK,CAAC,uBAAuB,CAAC;IAC/C;IAED,MAAMC,YAAY,GAAG,IAAI,CAACC,cAAc,CAACL,aAAa,CAAC;IACvD,OAAOM,kBAAkB,CAACC,eAAe,CAACH,YAAY,CAAC;;EAG3D;;;;AAIG;EACKC,cAAcA,CAClBG,YAAoB,EACpBC,UAAmB;IAEnB,MAAMC,OAAO,GAAGF,YAAY,CAACP,OAAO,CAChC,mBAAmB,EACnBU,SAAS,CAACC,YAAY,CACzB;IACD,MAAMC,MAAM,GAAGH,OAAO,CAACR,MAAM;IAC7B,MAAMY,OAAO,GAAGL,UAAU,GACpBM,IAAI,CAACC,IAAI,CAAC,CAAEH,MAAM,GAAG,CAAC,GAAG,CAAC,KAAM,CAAC,IAAIJ,UAAU,CAAC,GAAGA,UAAU,GAC5DI,MAAM,GAAG,CAAC,GAAG,CAAC,KAAM,CAAC;IAC5B,MAAMI,MAAM,GAAG,IAAIC,UAAU,CAACJ,OAAO,CAAC;IAEtC,KACI,IAAIK,KAAK,EAAEC,KAAK,EAAEC,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAG,CAAC,EAAEC,MAAM,GAAG,CAAC,EACtDA,MAAM,GAAGV,MAAM,EACfU,MAAM,EAAE,EACV;MACEH,KAAK,GAAGG,MAAM,GAAG,CAAC;MAClBF,OAAO,IACH,IAAI,CAACG,UAAU,CAACd,OAAO,CAACe,UAAU,CAACF,MAAM,CAAC,CAAC,IAAK,EAAE,GAAG,CAAC,GAAGH,KAAM;MACnE,IAAIA,KAAK,KAAK,CAAC,IAAIP,MAAM,GAAGU,MAAM,KAAK,CAAC,EAAE;QACtC,KACIJ,KAAK,GAAG,CAAC,EACTA,KAAK,GAAG,CAAC,IAAIG,OAAO,GAAGR,OAAO,EAC9BK,KAAK,EAAE,EAAEG,OAAO,EAAE,EACpB;UACEL,MAAM,CAACK,OAAO,CAAC,GAAID,OAAO,MAAO,EAAE,KAAKF,KAAK,GAAI,EAAE,CAAC,GAAI,GAAG;QAC9D;QACDE,OAAO,GAAG,CAAC;MACd;IACJ;IAED,OAAOJ,MAAM;;EAGjB;;;AAGG;EACKO,UAAUA,CAACE,OAAe;IAC9B,OAAOA,OAAO,GAAG,EAAE,IAAIA,OAAO,GAAG,EAAE,GAC7BA,OAAO,GAAG,EAAE,GACZA,OAAO,GAAG,EAAE,IAAIA,OAAO,GAAG,GAAG,GAC7BA,OAAO,GAAG,EAAE,GACZA,OAAO,GAAG,EAAE,IAAIA,OAAO,GAAG,EAAE,GAC5BA,OAAO,GAAG,CAAC,GACXA,OAAO,KAAK,EAAE,GACd,EAAE,GACFA,OAAO,KAAK,EAAE,GACd,EAAE,GACF,CAAC;;AAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}